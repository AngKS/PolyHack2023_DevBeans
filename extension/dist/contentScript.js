const overlayButton=document.createElement("button");function positionOverlayButton(t){const e=t.getBoundingClientRect(),o=window.innerHeight||document.documentElement.clientHeight;e.top<o/2?(overlayButton.style.top=`${e.bottom+window.scrollY}px`,overlayButton.style.left=`${e.left+window.scrollX}px`):(overlayButton.style.top=e.top+window.scrollY-overlayButton.offsetHeight+"px",overlayButton.style.left=`${e.left+window.scrollX}px`)}function captureUserInputs_(){const t=document.querySelectorAll('input, textarea, [contenteditable="true"]');for(let e=0;e<t.length;e++)"true"!==t[e].dataset.listening&&(t[e].addEventListener("input",(function(t){let e="";e="true"===this.getAttribute("contenteditable")?this.innerText:this.value,chrome.runtime.sendMessage({action:"logInput",inputValue:e})})),t[e].addEventListener("focus",(function(){overlayButton.style.display="block",positionOverlayButton(this)})),t[e].dataset.listening="true")}function captureUserInputs(){document.addEventListener("keydown",(function(t){const e=document.activeElement,o=e.innerText||e.value;chrome.runtime.sendMessage({action:"logInput",inputValue:o}),overlayButton.style.display="block",positionOverlayButton(e)}))}overlayButton.innerText="Overlay",overlayButton.style.position="absolute",overlayButton.style.zIndex="2147483647",overlayButton.style.background="#000",overlayButton.style.color="#fff",overlayButton.style.border="none",overlayButton.style.padding="5px 10px",overlayButton.style.borderRadius="5px",overlayButton.style.cursor="pointer",overlayButton.style.display="none",overlayButton.addEventListener("click",(()=>{chrome.runtime.sendMessage({action:"overlayClicked"})})),document.body.appendChild(overlayButton),captureUserInputs(),retrieveLocalStorageData(),window.addEventListener("resize",(()=>{const t=document.activeElement;!t||"input"!==t.tagName.toLowerCase()&&"textarea"!==t.tagName.toLowerCase()||positionOverlayButton(t)}));